<!DOCTYPE HTML>
<html lang="pl-PL" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="../static/css/style.css" th:href="@{/css/style.css}" type="text/css" rel="stylesheet"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        var elements = [];
        $(document).ready(function () {

            $("#add_to_table").click(function (e) {
                e.preventDefault();
                console.log("button on click");
                var text = $("#table_text").val();
                console.log(text);
                elements.push(text);
                $("#table_test").append("<tr><td>" + text + "</td></tr>");

                $("#block").append('<tr><td><input type="text" th:field="*{string}"></td></tr>')

            });

            $("#send_table").click(function (e) {
                e.preventDefault();
                console.log("send table");

            });
        });
    </script>
</head>
<body>

<script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function () {
        $("#test_form").submit(function (event) {
            event.preventDefault();
            var favorite = [];

            var $form = $(this);
            var url = $form.attr("action");
            console.log(url)
            $.each($("input[name='checkbox']:checked"), function () {
                favorite.push($(this).val());
            });
            var data = {
                "raz": 1,
                "dwa": 2,
                "list": favorite
            }
            var posting = $.post({
                url: url,
                data: JSON.stringify(data),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data, status, jq) {
                    console.log("success");
                    window.location.href = "/";
                }
            });

            console.log("submit form");
            // alert("Handler for .submit() called.");

        });

        $("#button").click(function (e) {
            console.log("button");
        });
    });
    /*]]>*/
</script>

<p>Jakis tekst</p>

<form id="test_form" name="test_form" action="/test/result" method="post">
    <div><label for="1">Label 1</label><input id="1" type="checkbox" name="checkbox" value="1"></div>
    <div><label for="2">Label 2</label><input id="2" type="checkbox" name="checkbox" value="2"></div>
    <div><label for="3">Label 3</label><input id="3" type="checkbox" name="checkbox" value="3"></div>
    <div><label for="4">Label 4</label><input id="4" type="checkbox" name="checkbox" value="4"></div>
    <div><label for="5">Label 5</label><input id="5" type="checkbox" name="checkbox" value="5"></div>
    <div><input type="submit" value="Submit"></div>
</form>
<div><label for="7">Label 7</label><input id="7" type="checkbox" name="checkbox" value="7"></div>
<input type="button" id="button" value="aaaa">

<div>
    <input id="table_text" type="text">
    <input id="add_to_table" type="button" value="Zatwierdz tekst">
</div>

<div>
    <input id="send_table" type="button" value="Wyslij do kontrolera">
</div>

<div>
    <table id="table_test">
    </table>
</div>

<p>Inna tablica</p>
<form method="post" action="/test/save" th:action="@{/test/save}" th:object="${stringContainer}">
    <table id="block">
        <th:block th:each="stringWrapper, iter : *{getStringList()}">
            <tr>
                <td>
                    <input type="text" th:field="*{getStringList()[__${iter.index}__].string}">
                </td>
            </tr>
        </th:block>
        <!--<tr>-->
        <!--<td>-->
        <!--<input type="text" th:value="*{stringContainer}">-->
        <!--</td>-->
        <!--</tr>-->
    </table>
    <input type="submit" value="Zapisz">
</form>


<!--<form method="post" action="/test/save" th:action="@{/test/save}" th:object="${stringWrapper}">-->

<!--<input type="text" th:field="*{string}">-->

<!--&lt;!&ndash;<tr>&ndash;&gt;-->
<!--&lt;!&ndash;<td>&ndash;&gt;-->
<!--&lt;!&ndash;<input type="text" th:value="*{stringContainer}">&ndash;&gt;-->
<!--&lt;!&ndash;</td>&ndash;&gt;-->
<!--&lt;!&ndash;</tr>&ndash;&gt;-->
<!--<input type="submit" value="Zapisz">-->
<!--</form>-->

</body>
</html>